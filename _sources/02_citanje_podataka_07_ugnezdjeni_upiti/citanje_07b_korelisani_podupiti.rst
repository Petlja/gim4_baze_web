.. -*- mode: rst -*-

Корелисани подупити
...................

Сви приказани угнежђени подупити до сада су били такви да се унутрашњи
упит (тзв. подупит) може извршити независно од спољашњег. Међутим, SQL
допушта и да се у унутрашњем упиту врши филтрирање на основу вредности
наведене у спољашњем подупиту. У том случају кажемо да су упити
**корелисани**.

.. questionnote::
           
   Приказати податке о изостанцима ученика који се зову Петар.

Овај упит се природно може написати коришћењем спајања табела ученика
и изостанака. Ипак, приказаћемо решење које користи корелисани
подупит. У спољашњем упиту читамо податке из табеле изостанака, а у
подупиту читамо име ученика чији идентификатор одговара идентификатору
у текућој врсти прочитаној из табеле изостанака и онда изостанке
филтрирамо на основу тога да ли је тако добијено име једнако
``Петар``.
   
.. code-block:: sql

   SELECT *
   FROM izostanak i
   WHERE 'Петар' = (SELECT ime
                    FROM ucenik u
                    WHERE u.id = i.id_ucenik);

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "id", "id_ucenik", "datum", "cas", "status"

   1, 1, 2021-05-14, 1, оправдан
   2, 1, 2021-05-14, 2, неоправдан
   3, 4, 2021-05-14, 1, нерегулисан
   4, 4, 2021-05-14, 2, нерегулисан
   ..., ..., ..., ..., ...

