.. -*- mode: rst -*-

Изрази и функције - задаци за вежбу
...................................

1. Приказати имена и презимена ученика и пол (уместо ``м`` и ``ж``
   треба да пише ``мушки`` односно ``женски``).

.. code-block:: sql

   SELECT ime, prezime, CASE
                          WHEN pol = 'м' THEN 'мушки'
                          WHEN pol = 'ж' THEN 'женски'
                        END AS pol
   FROM ucenik;

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "ime", "prezime", "pol"

   Петар, Петровић, мушки
   Милица, Јовановић, женски
   Лидија, Петровић, женски
   Петар, Миловановић, мушки
   Ана, Пекић, женски
   ..., ..., ...

2. Приказати имена и презимена свих ученика чије име и презиме почиње
   на исто слово (нпр. ``Петар Петровић``, ``Јована Јанковић`` и
   слично).

.. code-block:: sql
                
   SELECT ime, prezime
   FROM ucenik
   WHERE substr(ime, 1, 1) = substr(prezime, 1, 1);

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "ime", "prezime"

   Петар, Петровић
   Ана, Анђелковић
   Милан, Максимовић
   Милутин, Миљковић
   Матео, Молдован
   ..., ...

3. За сваки предмет приказати шифру која се гради од прва три слова
   назива предмета и разреда у ком се предмет предаје (нпр. за
   математику у првом разреду, шифра је ``мат1``).

.. code-block:: sql

   SELECT substr(naziv, 1, 3) || razred AS sifra
   FROM predmet;

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "sifra"

   Мат1
   Срп1
   Рач1
   Мат2
   Пси2
   ...

4. Неки изостанци су грешком уписани после последњег дана
   школе, 20. јуна 2021. Како би изгледала таблица изостанака ако би
   се сви ти изостанци преправили тако да им датум буде 20. јун 2021.
   
.. code-block:: sql

   SELECT id, id_ucenik, MIN(datum, '2021-06-20') AS datum, cas, status
   FROM izostanak;

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "id", "id_ucenik", "datum", "cas", "status"

   1, 1, 2021-05-14, 1, оправдан
   2, 1, 2021-05-14, 2, неоправдан
   3, 4, 2021-05-14, 1, нерегулисан
   4, 4, 2021-05-14, 2, нерегулисан
   5, 6, 2021-06-01, 1, неоправдан
   ..., ..., ..., ..., ...

5. Коришћњем функције за издвајање првог слова ниске одредити ученике
   мушког пола чије име почиње самогласником.

.. code-block:: sql

   SELECT ime
   FROM ucenik
   WHERE pol = 'м' AND substr(ime, 1, 1) IN ('А', 'Е', 'И', 'О', 'У');

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "ime"

   Огњен
   Андреј
   Алекса
   Урош
   Алекса
   ...

6. За сваког ученика приказати име, презиме, дан рођења, месец рођења
   и годину рођења (засебно, као целе бројеве).

.. code-block:: sql
                
   SELECT ime, prezime,
          CAST(strftime('%d', datum_rodjenja) AS INTEGER) AS dan,
          CAST(strftime('%m', datum_rodjenja) AS INTEGER) AS mesec,
          CAST(strftime('%Y', datum_rodjenja) AS INTEGER) AS godina
   FROM ucenik;

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "ime", "prezime", "dan", "mesec", "godina"

   Петар, Петровић, 1, 7, 2006
   Милица, Јовановић, 3, 4, 2006
   Лидија, Петровић, 14, 12, 2006
   Петар, Миловановић, 8, 12, 2005
   Ана, Пекић, 23, 2, 2005
   ..., ..., ..., ..., ...

7. Коришћењем функције за издвајање месеца из године, приказати све
   податке о ученицима рођеним у фебруару месецу.

.. code-block:: sql

   SELECT *
   FROM ucenik
   WHERE strftime('%m', datum_rodjenja) = '02';

Извршавањем упита добија се следећи резултат:

.. csv-table::
   :header:  "id", "ime", "prezime", "pol", "datum_rodjenja", "razred", "odeljenje"

   5, Ана, Пекић, ж, 2005-02-23, 2, 1
   16, Даница, Анђелковић, ж, 2007-02-11, 1, 1
   17, Теодора, Вучковић, ж, 2007-02-25, 1, 1
   20, Анита, Урошевић, ж, 2007-02-05, 1, 1
   38, Ксенија, Ђукић, ж, 2007-02-15, 1, 2
   ..., ..., ..., ..., ..., ..., ...

